<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>tea9的博客</title>
  <icon>https://www.gravatar.com/avatar/305be6556a20f80752b20924fba24bd9</icon>
  <subtitle>努力活着</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://tea9.coding.me/"/>
  <updated>2019-03-15T07:59:20.774Z</updated>
  <id>http://tea9.coding.me/</id>
  
  <author>
    <name>tea9</name>
    <email>shaomiaojava@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CentOS7下安装和配置redis</title>
    <link href="http://tea9.coding.me/2019/03/15/2019-03-15-test2/"/>
    <id>http://tea9.coding.me/2019/03/15/2019-03-15-test2/</id>
    <published>2019-03-15T15:52:11.000Z</published>
    <updated>2019-03-15T07:59:20.774Z</updated>
    
    <content type="html"><![CDATA[<p>Redis是一个高性能的，开源key-value型数据库。是构建高性能，可扩展的Web应用的完美解决方案，可以内存存储亦可持久化存储。因为要使用跨进程，跨服务级别的数据缓存，在对比多个方案后，决定使用Redis。顺便整理下Redis的安装过程，以便查阅。</p><p> 1 . 下载Redis<br>目前，最新的Redist版本为3.0，使用wget下载，命令如下：<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta"># wget http:<span class="comment">//download.redis.io/releases/redis-3.0.4.tar.gz</span></span></span><br></pre></td></tr></table></figure></p><p> 2 . 解压Redis<br>下载完成后，使用tar命令解压下载文件：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># <span class="selector-tag">tar</span> <span class="selector-tag">-xzvf</span> <span class="selector-tag">redis-3</span><span class="selector-class">.0</span><span class="selector-class">.4</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure></p><p>3 . 编译安装Redis<br>切换至程序目录，并执行make命令编译：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> redis-3.0.4</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> make</span></span><br></pre></td></tr></table></figure></p><p>执行安装命令<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> make install</span></span><br></pre></td></tr></table></figure></p><p>make install安装完成后，会在/usr/local/bin目录下生成下面几个可执行文件，它们的作用分别是：</p><ul><li>redis-server：Redis服务器端启动程序</li><li>redis-cli：Redis客户端操作工具。也可以用telnet根据其纯文本协议来操作</li><li>redis-benchmark：Redis性能测试工具</li><li>redis-check-aof：数据修复工具</li><li>redis-check-dump：检查导出工具</li></ul><p>备注</p><p>有的机器会出现类似以下错误：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make[1]: Entering directory `/root/redis/src'</span><br><span class="line">You need tcl 8.5 <span class="keyword">or</span> newer <span class="keyword">in</span> order <span class="keyword">to</span> <span class="builtin-name">run</span> the Redis test</span><br><span class="line">……</span><br></pre></td></tr></table></figure></p><p>这是因为没有安装tcl导致，yum安装即可：<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> tcl</span><br></pre></td></tr></table></figure></p><p>4 . 配置Redis<br>复制配置文件到/etc/目录：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cp redis.conf /etc/</span></span><br></pre></td></tr></table></figure></p><p>为了让Redis后台运行，一般还需要修改redis.conf文件：<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">vi</span> /etc/redis.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure></p><p>修改daemonize配置项为yes，使Redis进程在后台运行：<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">daemonize</span> <span class="literal">yes</span></span><br></pre></td></tr></table></figure></p><p>5 . 启动Redis<br>配置完成后，启动Redis：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/bin</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ./redis-server /etc/redis.conf</span></span><br></pre></td></tr></table></figure></p><p>检查启动情况：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ps -ef | grep redis</span></span><br></pre></td></tr></table></figure></p><p>看到类似下面的一行，表示启动成功：<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">root</span>     <span class="selector-tag">18443</span>     <span class="selector-tag">1</span>  <span class="selector-tag">0</span> <span class="selector-tag">13</span><span class="selector-pseudo">:05</span> ?        <span class="selector-tag">00</span><span class="selector-pseudo">:00</span><span class="selector-pseudo">:00</span> ./<span class="selector-tag">redis-server</span> *<span class="selector-pseudo">:6379</span></span><br></pre></td></tr></table></figure></p><p>6 . 添加开机启动项<br>让Redis开机运行可以将其添加到rc.local文件，也可将添加为系统服务service。本文使用rc.local的方式，添加service请参考：Redis 配置为 Service 系统服务 。</p><p>为了能让Redis在服务器重启后自动启动，需要将启动命令写入开机启动项：<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="string">"/usr/local/bin/redis-server /etc/redis.conf"</span> <span class="meta">&gt;&gt;</span>/etc/rc.local</span><br></pre></td></tr></table></figure></p><p>7 . Redis配置参数<br>在 前面的操作中，我们用到了使Redis进程在后台运行的参数，下面介绍其它一些常用的Redis启动参数：<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">daemonize：是否以后台daemon方式运行</span><br><span class="line">pidfile：pid文件位置</span><br><span class="line">port：监听的端口号</span><br><span class="line">timeout：请求超时时间</span><br><span class="line">loglevel：<span class="keyword">log</span>信息级别</span><br><span class="line">logfile：<span class="keyword">log</span>文件位置</span><br><span class="line">databases：开启数据库的数量</span><br><span class="line"><span class="keyword">save</span> * *：保存快照的频率，第一个*表示多长时间，第三个*表示执行多少次写操作。在一定时间内执行一定数量的写操作时，自动保存快照。可设置多个条件。</span><br><span class="line">rdbcompression：是否使用压缩</span><br><span class="line">dbfilename：数据快照文件名（只是文件名）</span><br><span class="line"><span class="keyword">dir</span>：数据快照的保存目录（仅目录）</span><br><span class="line">appendonly：是否开启appendonlylog，开启的话每次写操作会记一条<span class="keyword">log</span>，这会提高数据抗风险能力，但影响效率。</span><br><span class="line">appendfsync：appendonlylog如何同步到磁盘。三个选项，分别是每次写都强制调用fsync、每秒启用一次fsync、不调用fsync等待系统自己同步</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Redis是一个高性能的，开源key-value型数据库。是构建高性能，可扩展的Web应用的完美解决方案，可以内存存储亦可持久化存储。因为要使用跨进程，跨服务级别的数据缓存，在对比多个方案后，决定使用Redis。顺便整理下Redis的安装过程，以便查阅。&lt;/p&gt;
&lt;p&gt; 1
      
    
    </summary>
    
    
      <category term="centOS" scheme="http://tea9.coding.me/tags/centOS/"/>
    
      <category term="redis" scheme="http://tea9.coding.me/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>test</title>
    <link href="http://tea9.coding.me/2019/03/15/2019-03-15-test/"/>
    <id>http://tea9.coding.me/2019/03/15/2019-03-15-test/</id>
    <published>2019-03-15T07:09:14.000Z</published>
    <updated>2019-03-15T08:06:05.543Z</updated>
    
    <content type="html"><![CDATA[<p>xxxaaabfjkldjfkldjflkdjflkdfjlkdjfldkfjdlkfj.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fdlkfjdklfjdsklfjkdlfjlkdfj</span><br><span class="line">fdlfjdklfjdklfj</span><br></pre></td></tr></table></figure><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">fdlkfjdklfjdsklfjkdlfjlkdfj</span></span><br><span class="line"><span class="attribute">fdlfjdklfjdklfj</span></span><br></pre></td></tr></table></figure><pre><code>dfdfdfd</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;xxxaaabfjkldjfkldjflkdjflkdfjlkdjfldkfjdlkfj.&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;
      
    
    </summary>
    
    
      <category term="aaaa" scheme="http://tea9.coding.me/tags/aaaa/"/>
    
      <category term="bbbb" scheme="http://tea9.coding.me/tags/bbbb/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://tea9.coding.me/2019/03/15/hello-world/"/>
    <id>http://tea9.coding.me/2019/03/15/hello-world/</id>
    <published>2019-03-15T03:40:57.458Z</published>
    <updated>2019-03-15T03:40:57.458Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
</feed>
