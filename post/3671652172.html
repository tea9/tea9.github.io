<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="心中有光の孩子">
    <meta name="keyword"  content="tea9">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        android加固 - tea9的博客 | tea9&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> 努力活着 </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.png" />
        </div>
        <div class="name">
            <i>tea9</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#app加固威胁"><span class="toc-text">app加固威胁</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#app加固的目的"><span class="toc-text">app加固的目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#加固技术的发展历史"><span class="toc-text">加固技术的发展历史</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常见加固厂商"><span class="toc-text">常见加固厂商</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常见加固方式"><span class="toc-text">常见加固方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常用加固厂商特征"><span class="toc-text">常用加固厂商特征</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#脱壳的手法"><span class="toc-text">脱壳的手法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#反调试"><span class="toc-text">反调试</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> 努力活着 </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        android加固
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2019-03-06 00:00:00</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#android安全" title="android安全">android安全</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h2 id="app加固威胁"><a href="#app加固威胁" class="headerlink" title="app加固威胁"></a>app加固威胁</h2><ul>
<li>代码修改(广告植入、替换广告id)</li>
<li>资源修改(界面替换广告，链接替换)</li>
<li>破解(应用收费，内购)</li>
<li>篡改数据(无限金币,钻石)</li>
<li>加入恶意代码(木马，隐私，交易)</li>
<li>动态注入，数据拦截，窃取，修改；协议修改</li>
</ul>
<h2 id="app加固的目的"><a href="#app加固的目的" class="headerlink" title="app加固的目的"></a>app加固的目的</h2><ul>
<li>保护核心代码，防止被逆向，泄密 防止逆向分析-防止核心代码被反编译</li>
<li>防止营销作弊</li>
<li>防止代码被修改</li>
<li>控制被二次打包-校验完整性，签名，防止盗版</li>
<li>防止调试和注入-防止动态调试，注入获取关键数据</li>
<li>防止应用数据窃取-加密敏感数据</li>
<li>防止协议直接被盗刷-加密协议通信</li>
</ul>
<h2 id="加固技术的发展历史"><a href="#加固技术的发展历史" class="headerlink" title="加固技术的发展历史"></a>加固技术的发展历史</h2><ul>
<li>第一代 DEX加密、字符串加密、资源加密、反调试、自定义DexClassLoader </li>
<li>第二代 核心封装到So库/方法抽取/反调试</li>
<li>第三代 ELF变形/Ollvm混淆/多进程保护</li>
<li>第四代 代码虚拟化保护 DEX虚拟化保护</li>
<li>第五代 ARM虚拟化保护</li>
</ul>
<h2 id="常见加固厂商"><a href="#常见加固厂商" class="headerlink" title="常见加固厂商"></a>常见加固厂商</h2><ul>
<li>加固保360</li>
</ul>
<p><a href="http://jiagu.360.cn/#/global/index" target="_blank" rel="noopener">360加固保</a></p>
<ul>
<li>娜迦nagapt</li>
</ul>
<p><a href="http://www.nagain.com/" target="_blank" rel="noopener">娜迦加固</a>  </p>
<ul>
<li>梆梆bangcle</li>
</ul>
<p><a href="https://www.bangcle.com/" target="_blank" rel="noopener">梆梆加固</a></p>
<ul>
<li>爱加密ijm</li>
</ul>
<p><a href="http://www.ijiami.cn/appprotect_encrypt_way" target="_blank" rel="noopener">爱加密加固</a></p>
<ul>
<li>阿里</li>
<li>百度，盛大，腾讯，网秦，通付盾</li>
</ul>
<h2 id="常见加固方式"><a href="#常见加固方式" class="headerlink" title="常见加固方式"></a>常见加固方式</h2><p>类加载技术：<br>针对apk中的classes.dex文件进行处理，放入待定的文件中，通过native代码来进行对其运行时解密。  </p>
<p>使用厂商：娜迦，爱加密，梆梆等。  </p>
<p>方法替换技术：<br>将classes.dex中的方法中代码进行提取，抽取方法，在运行时对其动态进行解密还原  </p>
<p>梆梆，娜迦  </p>
<h2 id="常用加固厂商特征"><a href="#常用加固厂商特征" class="headerlink" title="常用加固厂商特征"></a>常用加固厂商特征</h2><ul>
<li>娜迦 libchaosvmp.so,libddog.so libfdog.so</li>
<li>爱加密 libexec.so,libexecmain.so</li>
<li>梆梆 libsecexe.so libsecmain.so libDexHelper.so</li>
<li>360 libprotectClass.so libjiagu.so</li>
<li>通付盾 libegis.so</li>
<li>网秦 libnqshield.so</li>
<li>百度 libbaiduprotect.so</li>
</ul>
<h2 id="脱壳的手法"><a href="#脱壳的手法" class="headerlink" title="脱壳的手法"></a>脱壳的手法</h2><ul>
<li>修改系统源码自动脱壳</li>
<li>通过hook方式对关键函数进行脱壳</li>
<li>开源工具入ZjDroid，DexHunter进行脱壳</li>
<li>利用IDA或者GDB动态调试进行脱壳</li>
</ul>
<h2 id="反调试"><a href="#反调试" class="headerlink" title="反调试"></a>反调试</h2><p>反调试代码，都是在壳子的so中执行的，那么，我们只要在进入壳子第一行代码时下了断点，在调试过程中，找到了反调试检测代码的位置，直接干掉，直接绕过反调试  </p>
<p>在libdvm.so中方法loadNativeCode处下断点，android系统加载加载native代码也就是so文件都要走的函数，所以下在这里的断点，能够有效的找到加载壳子的so位置，能够在一进入壳子的so，直接断住。  </p>
<p>最简单的技巧，就是单步调试，F8一路按下去，按的多了，就有了更好的位置下断点。  </p>
<p>记住一点就好，壳子的so中，总有一处是解密还原出app原本的dex的。  </p>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        <li>
            <a target="_blank" href="https://twitter.com/shaomiaosun">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-twitter"></i>
                            </span>
            </a>
        </li>
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/tea9">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://tea9.github.io">tea9</a></span>
        <span>/</span>
        
        <span><a href="https://miracles666.github.io">Miracles</a></span>
        <span>/</span>
        
        <span><a href="https://www.zhangqirun.cn">童年是个风筝的博客</a></span>
        <span>/</span>
        
        <span><a href="https://townwang.com">文科中的技术宅</a></span>
        <span>/</span>
        
        <span><a href="https://sunbossrs.github.io">耀日庄主的博客</a></span>
        <span>/</span>
        
        <span><a href="https://www.pdcgame.com">pdcgame</a></span>
        <span>/</span>
        
        <span><a href="http://gloomyghost.com/">gloomyghost</a></span>
        <span>/</span>
        
        <span><a href="https://www.fghrsh.net">FGHRSH</a></span>
        <span>/</span>
        
        <span><a href="https://a632079.me">藤の青</a></span>
        <span>/</span>
        
        <span><a href="https://www.vseu.com/">幸运草</a></span>
        <span>/</span>
        
        <span><a href="https://shawnzeng.com/">诗与酒</a></span>
        <span>/</span>
        
        <span><a href="https://nekohome.moenya.cat">NekoHome 喵窝</a></span>
        <span>/</span>
        
        <span><a href="https://www.lkxin.cn">清酒踏月</a></span>
        <span>/</span>
        
        <span><a href="http://www.ad-s.cn/">冰峰博客</a></span>
        <span>/</span>
        
        <span><a href="https://linhai1990.com">以梦为马，奔向远方</a></span>
        <span>/</span>
        
        <span><a href="https://www.cnliuqi.com">终南小筑</a></span>
        <span>/</span>
        
        <span><a href="http://login546.xyz">Unique</a></span>
        <span>/</span>
        
        <span><a href="https://1000yun.cn/">雨落泪尽</a></span>
        <span>/</span>
        
        <span><a href="https://laugh12321.github.io/blog">Laugh&#39;s Blog</a></span>
        <span>/</span>
        
        <span><a href="https://shaozhi.site">ShaoZhi&#39;s Blog</a></span>
        <span>/</span>
        
        <span><a href="https://www.xiz.im">Xiang Xiz</a></span>
        <span>/</span>
        
        <span><a href="https://www.xx8.uk">lan酱的小窝</a></span>
        <span>/</span>
        
        <span><a href="https://www.ckbug.com">Casey</a></span>
        <span>/</span>
        
        <span><a href="http://poi.ac/">星夜的蓝天</a></span>
        <span>/</span>
        
        <span><a href="http://www.oneinf.com">俍注</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<!--create by tea9-->

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
    var gitalk = new Gitalk({
      clientID: 'dd67fb84ddbc6cf9c112',
      clientSecret: 'be4e88389be3e45fbafbd7592148fa47feacaacf',
      repo: 'tea9.github.io',
      owner: 'tea9',
      admin: 'tea9',
      id: location.pathname,      // Ensure uniqueness and length less than 50
      distractionFreeMode: false  // Facebook-like distraction free mode
    })
    gitalk.render('comment-container')
</script>

<!--end-->





</html>
